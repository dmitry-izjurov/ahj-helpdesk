!function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(s,o,function(e){return t[e]}.bind(null,o));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);const s=document.querySelector(".list"),o=document.querySelector(".wrapper"),a=function(t,e,n,s){return`\n    <li class="item">\n    <div class="wrapper__block-content">\n      <div class="block_checkbox">\n        <input type="checkbox" class="input" ${n}>\n        <span class="text" data-id=${s}>${t}</span>\n      </div>\n    </div> \n    <div class="block_edit">\n      <span class="time">${e}</span>\n      <div class="button button_edit">\n          <svg class="icon" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="485.219px" height="485.22px" viewBox="0 0 485.219 485.22" style="enable-background:new 0 0 485.219 485.22;"\n             xml:space="preserve">\n          <g>\n            <path d="M467.476,146.438l-21.445,21.455L317.35,39.23l21.445-21.457c23.689-23.692,62.104-23.692,85.795,0l42.886,42.897\n              C491.133,84.349,491.133,122.748,467.476,146.438z M167.233,403.748c-5.922,5.922-5.922,15.513,0,21.436\n              c5.925,5.955,15.521,5.955,21.443,0L424.59,189.335l-21.469-21.457L167.233,403.748z M60,296.54c-5.925,5.927-5.925,15.514,0,21.44\n              c5.922,5.923,15.518,5.923,21.443,0L317.35,82.113L295.914,60.67L60,296.54z M338.767,103.54L102.881,339.421\n              c-11.845,11.822-11.815,31.041,0,42.886c11.85,11.846,31.038,11.901,42.914-0.032l235.886-235.837L338.767,103.54z\n               M145.734,446.572c-7.253-7.262-10.749-16.465-12.05-25.948c-3.083,0.476-6.188,0.919-9.36,0.919\n              c-16.202,0-31.419-6.333-42.881-17.795c-11.462-11.491-17.77-26.687-17.77-42.887c0-2.954,0.443-5.833,0.859-8.703\n              c-9.803-1.335-18.864-5.629-25.972-12.737c-0.682-0.677-0.917-1.596-1.538-2.338L0,485.216l147.748-36.986\n              C147.097,447.637,146.36,447.193,145.734,446.572z"/>\n          </g>\n          </svg>\n      </div>\n      <div class="button button_remove">\n        <svg class="icon" fill="grey" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          width="612.043px" height="612.043px" viewBox="0 0 612.043 612.043" style="enable-background:new 0 0 612.043 612.043;"\n          xml:space="preserve">\n          <g>\n            <g id="cross">\n               <g>\n                 <path d="M397.503,306.011l195.577-195.577c25.27-25.269,25.27-66.213,0-91.482c-25.269-25.269-66.213-25.269-91.481,0\n                   L306.022,214.551L110.445,18.974c-25.269-25.269-66.213-25.269-91.482,0s-25.269,66.213,0,91.482L214.54,306.033L18.963,501.61\n                   c-25.269,25.269-25.269,66.213,0,91.481c25.269,25.27,66.213,25.27,91.482,0l195.577-195.576l195.577,195.576\n                   c25.269,25.27,66.213,25.27,91.481,0c25.27-25.269,25.27-66.213,0-91.481L397.503,306.011z"/>\n               </g>\n            </g>\n          </g>\n        </svg>\n      </div>\n    </div>\n  </li>\n    `};const r=new class{constructor(){this.data=void 0}getServer(){const t=new XMLHttpRequest;t.open("GET","http://localhost:7070/?method=allTicket"),t.send(),t.addEventListener("load",()=>{if(t.status>=200&&t.status<300)try{this.data=JSON.parse(t.responseText),this.data.length>0&&this.data.forEach(t=>{let e="";t.status&&(e="checked"),s.insertAdjacentHTML("beforeend",a(t.name,t.created,e,t.id))})}catch(t){console.error(t)}})}getAction(t){const e=t.closest(".button"),n=t.closest(".form__button-reset"),r=t.closest(".text");if(e){if(e.classList.contains("button_add")){o.insertAdjacentHTML("afterbegin",'\n<div class="wrapper__popup">\n  <div class="popup popup_add">\n    <form class="form" name="add-ticket">\n      <header class="form__header">Добавить тикет</header>\n      <label class="field-group">\n        <span class="field-label text_form">Краткое описание</span>\n        <input type="text" name="text" class="field" minlength="2" maxlength="30" required>\n      </label>\n      <label class="field-group">\n        <span class="field-label text_form">Подробное описание</span>\n        <textarea class="textarea" name="textarea" required></textarea>\n      </label>\n      <div class="block-buttons">\n        <button class="form__button-reset form__buttons" type="reset">Отмена</button>\n        <button class="form__button form__buttons">Ок</button>\n      </div>\n    </form>\n  </div>\n</div>\n');const t=document.querySelector(".form[name=add-ticket]");t.addEventListener("submit",e=>{e.preventDefault();const n=new FormData(t),o=new XMLHttpRequest;o.open("POST","http://localhost:7070/?method=createTicket"),o.send(n),t.closest(".wrapper__popup").remove();const r=new XMLHttpRequest;r.open("GET","http://localhost:7070/?method=allTicket"),r.send(),r.addEventListener("load",()=>{if(r.status>=200&&r.status<300)try{this.data=JSON.parse(r.responseText);let t="";this.data[this.data.length-1].status&&(t="checked");const e=this.data.length-1;s.insertAdjacentHTML("beforeend",a(this.data[e].name,this.data[e].created,t,this.data[e].id))}catch(t){console.error(t)}})})}if(e.classList.contains("button_edit")){const t=e.closest(".item").querySelector(".text").dataset.id,n=new XMLHttpRequest,s="http://localhost:7070/?method=ticketById&id="+t;n.open("GET",s),n.send(),n.addEventListener("load",()=>{if(n.status>=200&&n.status<300)try{const a=JSON.parse(n.responseText);o.insertAdjacentHTML("afterbegin",(e=a.name,s=a.description,`\n  <div class="wrapper__popup">\n    <div class="popup popup_edit">\n      <form class="form" name="edit-ticket">\n        <header class="form__header">Изменить тикет</header>\n        <label class="field-group">\n          <span class="field-label text_form">Краткое описание</span>\n          <input type="text" name="text" class="field" minlength="2" maxlength="30" value="${e}" required>\n        </label>\n        <label class="field-group">\n          <span class="field-label text_form">Подробное описание</span>\n          <textarea class="textarea" name="textarea" required>${s}</textarea>\n        </label>\n        <div class="block-buttons">\n          <button class="form__button-reset form__buttons" type="reset">Отмена</button>\n          <button class="form__button form__buttons">Ок</button>\n        </div>\n      </form>\n    </div>\n  </div>\n  `));const r=document.querySelector(".form[name=edit-ticket]");r.addEventListener("submit",e=>{e.preventDefault();const n=new FormData(r),s=new XMLHttpRequest,o="http://localhost:7070/?method=ticketById&id="+t;s.open("POST",o),s.send(n),r.closest(".wrapper__popup").remove(),s.addEventListener("load",()=>{if(s.status>=200&&s.status<300)try{const t=JSON.parse(s.responseText),e=document.querySelector(`.text[data-id="${t.id}"]`);e.textContent=t.name;const n=e.closest(".wrapper__block-content").querySelector("p.text");n&&(n.textContent=t.description)}catch(t){console.error(t)}})})}catch(t){console.error(t)}var e,s})}if(e.classList.contains("button_remove")){o.insertAdjacentHTML("afterbegin",'\n<div class="wrapper__popup">\n  <div class="popup popup_delete">\n    <form class="form" name="delete-ticket">\n      <header class="form__header">Удалить тикет</header>\n      <p class="text_form" id="delete-text">\n        Вы уверены, что хотите удалить тикет? Это действие необратимо.\n      </p>\n      <div class="block-buttons">\n        <button class="form__button-reset form__buttons" type="reset">Отмена</button>\n        <button class="form__button form__buttons">Ок</button>\n      </div>\n    </form>\n  </div>\n</div>\n');const t=document.querySelector(".form[name=delete-ticket]");t.addEventListener("submit",n=>{n.preventDefault();const s=e.closest(".item").querySelector(".text").dataset.id,o=new FormData;o.append("id",s);const a=new XMLHttpRequest;a.open("POST","http://localhost:7070/?method=deleteTicket"),a.send(o),t.closest(".wrapper__popup").remove(),a.addEventListener("load",()=>{if(a.status>=200&&a.status<300)try{e.closest(".item").remove()}catch(t){console.error(t)}})})}}if(n&&t.closest(".wrapper__popup").remove(),r){const t=r.closest(".wrapper__block-content").querySelector(".block-fullcontent");if(t)t.classList.toggle("hidden");else{const t=new XMLHttpRequest,e="http://localhost:7070/?method=ticketById&id="+r.dataset.id;t.open("GET",e),t.send(),t.addEventListener("load",()=>{if(t.status>=200&&t.status<300)try{const e=JSON.parse(t.responseText);r.closest(".wrapper__block-content").insertAdjacentHTML("beforeend",`\n  <div class="block-fullcontent">\n    <p class="text">\n      ${e.description}\n    </p>\n  </div>\n  `)}catch(t){console.error(t)}})}}}};r.getServer(),o.addEventListener("click",t=>{r.getAction(t.target)})}]);